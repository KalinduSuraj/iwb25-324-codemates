<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BinBuddy - Smart Waste Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0FDF4;
            /* A very light green for the body background */
        }
        /* Custom scrollbar for a more polished look */
        
         ::-webkit-scrollbar {
            width: 8px;
        }
        
         ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
         ::-webkit-scrollbar-thumb {
            background: #15803d;
            /* dark green */
            border-radius: 10px;
        }
        
         ::-webkit-scrollbar-thumb:hover {
            background: #166534;
            /* slightly darker green */
        }
        
        .nav-link-active {
            color: #22c55e;
            /* bright green */
            font-weight: 600;
        }
        /* Animation for the modal */
        
        .modal-enter {
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-leave {
            animation: fadeOut 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }
    </style>
</head>

<body class="text-gray-800">

    <!-- App Container -->
    <div id="app" class="flex flex-col min-h-screen">

        <!-- Header & Navigation Component -->
        <header id="navbar-container" class="bg-white/80 backdrop-blur-md shadow-md sticky top-0 z-40">
            <!-- Navbar content will be injected here by JavaScript -->
        </header>

        <!-- Main Content Area -->
        <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Breadcrumb Component -->
            <nav id="breadcrumb-container" class="mb-6 text-sm text-gray-500">
                <!-- Breadcrumb will be injected here -->
            </nav>

            <!-- Dynamic Page Content -->
            <div id="page-content">
                <!-- Page content will be dynamically loaded here -->
            </div>
        </main>

        <!-- Footer Component -->
        <footer id="footer-container" class="bg-green-800 text-white">
            <!-- Footer will be injected here -->
        </footer>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
        <div id="modalContent" class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto transform transition-all">
            <!-- Modal content (Sign In/Sign Up form) will be injected here -->
        </div>
    </div>


    <!-- JAVASCRIPT LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

                    // =================================================================================
                    // STATE MANAGEMENT
                    // =================================================================================

                    const state = {
                        currentPage: 'home',
                        isLoggedIn: false,
                        userEmail: null,
                        isModalOpen: false,
                        isSignInForm: true,
                    };

                    // =================================================================================
                    // TEMPLATES / COMPONENTS
                    // =================================================================================

                    // --- Navbar Component ---
                    const Navbar = () => {
                            return `
                <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between h-16">
                        <div class="flex items-center">
                            <a href="#" class="flex-shrink-0 text-2xl font-bold text-green-700 flex items-center nav-link" data-page="home">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2 text-green-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" /></svg>
                                BinBuddy
                            </a>
                            <div class="hidden md:block ml-10">
                                <div class="flex items-baseline space-x-4">
                                    <a href="#" class="nav-link text-gray-600 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-page="home">Home</a>
                                    <a href="#" class="nav-link text-gray-600 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-page="services">Services</a>
                                    <a href="#" class="nav-link text-gray-600 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-page="about">About Us</a>
                                    <a href="#" class="nav-link text-gray-600 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-page="contact">Contact</a>
                                </div>
                            </div>
                        </div>
                        <div id="auth-section" class="hidden md:block">
                            ${state.isLoggedIn ?
                        `<div class="flex items-center space-x-4">
                                    <span class="text-sm text-gray-700">Welcome, ${state.userEmail}</span>
                                    <button id="logoutBtn" class="bg-red-500 text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-red-600 transition-all shadow-sm">Logout</button>
                                </div>` :
                        `<button id="signInBtn" class="bg-green-600 text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-green-700 transition-all shadow-sm hover:shadow-lg transform hover:-translate-y-px">
                                    Sign In
                                </button>`
                    }
                        </div>
                         <div class="-mr-2 flex md:hidden">
                            <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-green-700 focus:outline-none">
                                <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                     <div id="mobile-menu" class="md:hidden hidden">
                        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                            <a href="#" class="nav-link text-gray-600 hover:text-green-600 block px-3 py-2 rounded-md text-base font-medium" data-page="home">Home</a>
                            <a href="#" class="nav-link text-gray-600 hover:text-green-600 block px-3 py-2 rounded-md text-base font-medium" data-page="services">Services</a>
                            <a href="#" class="nav-link text-gray-600 hover:text-green-600 block px-3 py-2 rounded-md text-base font-medium" data-page="about">About Us</a>
                            <a href="#" class="nav-link text-gray-600 hover:text-green-600 block px-3 py-2 rounded-md text-base font-medium" data-page="contact">Contact</a>
                            <div class="mt-4 pt-4 border-t border-gray-200" id="mobile-auth-section">
                            ${state.isLoggedIn ?
                        `<div class="flex flex-col space-y-3">
                                    <span class="text-sm text-gray-700 px-3">Welcome, ${state.userEmail}</span>
                                    <button id="mobileLogoutBtn" class="w-full text-left bg-red-500 text-white px-3 py-2 rounded-md text-sm font-semibold hover:bg-red-600">Logout</button>
                                </div>` :
                        `<button id="mobileSignInBtn" class="w-full text-left bg-green-600 text-white px-3 py-2 rounded-md text-sm font-semibold hover:bg-green-700">
                                    Sign In
                                </button>`
                    }
                            </div>
                        </div>
                    </div>
                </nav>
                `;
            };

            // --- Footer Component ---
            const Footer = () => {
                return `
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-white flex items-center mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-2 text-green-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" /></svg>
                                BinBuddy
                            </h3>
                            <p class="text-green-200 text-sm">Leading the charge in smart, sustainable waste management solutions for a cleaner planet.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-white mb-4">Quick Links</h4>
                            <ul class="space-y-2 text-sm">
                                <li><a href="#" class="nav-link text-green-200 hover:text-white" data-page="home">Home</a></li>
                                <li><a href="#" class="nav-link text-green-200 hover:text-white" data-page="services">Services</a></li>
                                <li><a href="#" class="nav-link text-green-200 hover:text-white" data-page="about">About Us</a></li>
                                <li><a href="#" class="nav-link text-green-200 hover:text-white" data-page="contact">Contact</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-white mb-4">Legal</h4>
                            <ul class="space-y-2 text-sm">
                                <li><a href="#" class="text-green-200 hover:text-white">Privacy Policy</a></li>
                                <li><a href="#" class="text-green-200 hover:text-white">Terms of Service</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-white mb-4">Connect With Us</h4>
                            <div class="flex space-x-4">
                                <a href="#" class="text-green-300 hover:text-white"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                                <a href="#" class="text-green-300 hover:text-white"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg></a>
                                <a href="#" class="text-green-300 hover:text-white"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.795 2.013 10.149 2 12.315 2zm-1.161 1.525a8.824 8.824 0 00-3.073.348 3.487 3.487 0 00-1.246.811 3.487 3.487 0 00-.811 1.246 8.824 8.824 0 00-.348 3.073c-.036.98-.05 1.284-.05 3.518s.014 2.538.05 3.518a8.824 8.824 0 00.348 3.073 3.487 3.487 0 00.811 1.246 3.487 3.487 0 001.246.811 8.824 8.824 0 003.073.348c.98.036 1.284.05 3.518.05s2.538-.014 3.518-.05a8.824 8.824 0 003.073-.348 3.487 3.487 0 001.246-.811 3.487 3.487 0 00.811-1.246 8.824 8.824 0 00.348-3.073c.036-.98.05-1.284.05-3.518s-.014-2.538-.05-3.518a8.824 8.824 0 00-.348-3.073 3.487 3.487 0 00-.811-1.246 3.487 3.487 0 00-1.246-.811 8.824 8.824 0 00-3.073-.348c-.98-.036-1.284-.05-3.518-.05s-2.538.014-3.518.05zM12 15a3 3 0 110-6 3 3 0 010 6zm0-1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM16.5 7.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" clip-rule="evenodd" /></svg></a>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 border-t border-green-700 pt-8 text-center text-sm text-green-300">
                        <p>&copy; ${new Date().getFullYear()} BinBuddy. All Rights Reserved. Creating a Greener World, One Bin at a Time.</p>
                    </div>
                </div>
                `;
            };

            // --- Breadcrumb Component ---
            const Breadcrumb = () => {
                const pageName = state.currentPage.charAt(0).toUpperCase() + state.currentPage.slice(1);
                return `
                <ol class="flex items-center whitespace-nowrap" aria-label="Breadcrumb">
                    <li class="inline-flex items-center">
                        <a class="flex items-center text-sm text-gray-500 hover:text-blue-600 focus:outline-none focus:text-blue-600 nav-link" href="#" data-page="home">
                        Home
                        </a>
                        <svg class="flex-shrink-0 mx-2 overflow-visible size-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m9 18 6-6-6-6"></path>
                        </svg>
                    </li>
                    <li class="inline-flex items-center text-sm font-semibold text-green-700 truncate" aria-current="page">
                        ${pageName.replace(/([A-Z])/g, ' $1').trim()}
                    </li>
                </ol>
                `;
            };

            // --- Page Content Components ---
            const pages = {
                home: `
                    <div class="relative overflow-hidden rounded-3xl bg-cover bg-center p-8 md:p-16 text-white" style="background-image: url('./assets/images/background3.png');">
                        
                        <div class="absolute inset-0 bg-black/40"></div>

                        <div class="relative z-10 flex flex-col items-center">

                            <div class="w-full max-w-4xl text-center bg-white/10 backdrop-blur-lg rounded-2xl p-8 md:p-12 border border-white/20 shadow-lg">
                                <h1 class="text-4xl md:text-6xl font-extrabold leading-tight text-shadow">
                                    <span class="text-green-300">Smart Waste Management</span> for a Greener Tomorrow.
                                </h1>
                                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-200">
                                    BinBuddy provides innovative, eco-friendly solutions to manage waste efficiently. Join us in making our communities cleaner and more sustainable.
                                </p>
                                <div class="mt-8 flex flex-col sm:flex-row justify-center gap-4">
                                    <button class="nav-link bg-green-600 text-white font-bold py-3 px-8 rounded-full hover:bg-green-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1" data-page="services">Our Services</button>
                                    <button class="nav-link bg-white/20 text-white font-bold py-3 px-8 rounded-full hover:bg-white/30 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1 border-2 border-white/50" data-page="contact">Contact Us</button>
                                </div>
                            </div>

                            <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-6xl">
                                
                                <div class="bg-white/10 backdrop-blur-md p-8 rounded-2xl text-center border border-white/20 shadow-lg transition-transform hover:-translate-y-2">
                                    <div class="bg-white/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto">
                                    <svg xmlns="http://www.w.org/2000/svg" class="h-8 w-8 text-green-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                                    </div>
                                    <h3 class="mt-4 text-xl font-bold text-white">Residential Pickup</h3>
                                    <p class="mt-2 text-gray-300">Reliable and timely trash collection for your home. We handle everything, so you don't have to.</p>
                                </div>
                                
                                <div class="bg-white/10 backdrop-blur-md p-8 rounded-2xl text-center border border-white/20 shadow-lg transition-transform hover:-translate-y-2">
                                    <div class="bg-white/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>
                                    </div>
                                    <h3 class="mt-4 text-xl font-bold text-white">Commercial Solutions</h3>
                                    <p class="mt-2 text-gray-300">Customized waste management plans for businesses of all sizes. Keep your workplace clean and compliant.</p>
                                </div>
                                
                                <div class="bg-white/10 backdrop-blur-md p-8 rounded-2xl text-center border border-white/20 shadow-lg transition-transform hover:-translate-y-2">
                                    <div class="bg-white/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.S82m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                                    </div>
                                    <h3 class="mt-4 text-xl font-bold text-white">Recycling Programs</h3>
                                    <p class="mt-2 text-gray-300">Easy and effective recycling solutions to help you reduce your carbon footprint and protect the environment.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                `,
                services: `
                    <div class="text-center mb-12">
                         <h2 class="text-3xl font-bold text-gray-900 sm:text-4xl">Our Comprehensive Services</h2>
                         <p class="mt-4 text-lg text-gray-600">Tailored waste management solutions for every need.</p>
                    </div>
                    <div class="space-y-12">
                        <div class="flex flex-col md:flex-row items-center gap-8 bg-white p-8 rounded-2xl shadow-lg">
                            <img src="./assets/images/service1.png" alt="Residential Pickup" class="w-full md:w-1/3 h-auto rounded-lg object-cover">
                            <div>
                                <h3 class="text-2xl font-bold text-green-700">Residential Pickup</h3>
                                <p class="mt-2 text-gray-600">We offer weekly curbside trash and recycling collection services for single-family homes, condos, and apartments. Our reliable team ensures your waste is handled responsibly and efficiently. Schedules are flexible, and we provide sturdy, animal-proof bins.</p>
                            </div>
                        </div>
                        <div class="flex flex-col md:flex-row-reverse items-center gap-8 bg-white p-8 rounded-2xl shadow-lg">
                            <img src="./assets/images/service2.png" alt="Commercial Solutions" class="w-full md:w-1/3 h-auto rounded-lg object-cover">
                            <div>
                                <h3 class="text-2xl font-bold text-green-700">Commercial & Business Solutions</h3>
                                <p class="mt-2 text-gray-600">BinBuddy partners with businesses to create sustainable waste management strategies. From restaurants and retail stores to large corporate offices, we provide customized dumpster sizes, pickup schedules, and comprehensive recycling programs to meet your specific business needs and environmental goals.</p>
                            </div>
                        </div>
                         <div class="flex flex-col md:flex-row items-center gap-8 bg-white p-8 rounded-2xl shadow-lg">
                            <img src="./assets/images/service3.png" alt="Recycling Programs" class="w-full md:w-1/3 h-auto rounded-lg object-cover">
                            <div>
                                <h3 class="text-2xl font-bold text-green-700">Advanced Recycling Programs</h3>
                                <p class="mt-2 text-gray-600">Our recycling programs make it easy to go green. We accept a wide range of materials, including plastics, paper, glass, and metals. We also offer specialized services for electronic waste (e-waste) and hazardous materials, ensuring they are disposed of safely and in an environmentally friendly manner.</p>
                            </div>
                        </div>
                    </div>
                `,
                about: `
                    <div class="max-w-4xl mx-auto bg-white p-10 rounded-2xl shadow-lg">
                        <h2 class="text-3xl font-bold text-center text-gray-900 sm:text-4xl">About BinBuddy</h2>
                        <p class="mt-6 text-gray-600 text-lg">
                            Founded in 2025, BinBuddy was born from a simple yet powerful idea: waste management should be easy, efficient, and environmentally conscious. We saw a need for a modern approach to an age-old problem, leveraging technology and a customer-centric focus to revolutionize the industry.
                        </p>
                        <p class="mt-4 text-gray-600 text-lg">
                            Our mission is to provide sustainable waste solutions that benefit both our clients and the planet. We believe in the power of community and are dedicated to helping homes and businesses reduce their environmental impact through responsible disposal and comprehensive recycling programs. At BinBuddy, we're not just collecting trash; we're building a cleaner, greener future for generations to come.
                        </p>
                        <div class="mt-12">
                            <h3 class="text-2xl font-bold text-center text-gray-800 mb-8">Meet Our Team</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                                    <img src="./assets/images/Shan.jpeg" alt="Team Member Shan" class="w-full h-48 object-cover">
                                    <div class="p-4 text-center">
                                        <h4 class="font-bold text-lg">Shan Indeewa</h4>
                                    </div>
                                </div>
                                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                                    <img src="https://github.com/KalinduSuraj.png" alt="Team Member Kalindu Suraj" class="w-full h-48 object-cover">
                                    <div class="p-4 text-center">
                                        <h4 class="font-bold text-lg">Kalindu Suraj</h4>
                                    </div>
                                </div>

                                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                                    <img src="./assets/images/Harindu.jpeg" alt="Team Member Harindu" class="w-full h-48 object-cover">
                                    <div class="p-4 text-center">
                                        <h4 class="font-bold text-lg">Harindu De Silva</h4>
                                    </div>
                                </div>
                                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                                    <img src="./assets/images/Amri.jpeg" alt="Team Member Amri" class="w-full h-48 object-cover">
                                    <div class="p-4 text-center">
                                        <h4 class="font-bold text-lg">Amri Haneef</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                contact: `
                     <div class="max-w-2xl mx-auto bg-white p-10 rounded-2xl shadow-lg">
                        <h2 class="text-3xl font-bold text-center text-gray-900 sm:text-4xl">Get In Touch</h2>
                        <p class="mt-4 text-center text-gray-600">Have a question or need a custom quote? We're here to help!</p>
                        <form class="mt-8 space-y-6">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
                                <input type="text" name="name" id="name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="John Doe">
                            </div>
                             <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                                <input type="email" name="email" id="email" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="you@example.com">
                            </div>
                             <div>
                                <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                                <textarea name="message" id="message" rows="4" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="How can we help you?"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                    Send Message
                                </button>
                            </div>
                        </form>
                    </div>
                `
            };

            // --- Auth Modal Form Component ---
            const AuthForm = () => {
                const isSignIn = state.isSignInForm;
                return `
                <div class="p-6 sm:p-8">
                    <div class="flex justify-between items-start">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">${isSignIn ? 'Sign In' : 'Create Account'}</h2>
                            <p class="mt-1 text-sm text-gray-600">
                                ${isSignIn ? 'Welcome back! Please enter your details.' : 'Join BinBuddy to manage your services.'}
                            </p>
                        </div>
                        <button id="closeModalBtn" class="p-1 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    
                    <form id="authForm" class="mt-8 space-y-4" novalidate>
                        ${!isSignIn ? `
                        <div>
                            <label for="name" class="text-sm font-medium text-gray-700 sr-only">Full Name</label>
                            <input type="text" name="name" id="name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Full Name">
                        </div>` : ''}

                        <div>
                            <label for="email" class="text-sm font-medium text-gray-700 sr-only">Email</label>
                            <input type="email" name="email" id="email" autocomplete="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Email address">
                        </div>

                        <div>
                            <label for="password" class="text-sm font-medium text-gray-700 sr-only">Password</label>
                            <input type="password" name="password" id="password" autocomplete="${isSignIn ? 'current-password' : 'new-password'}" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Password">
                        </div>
                        
                        <div id="authMessage" class="text-sm text-red-500 hidden"></div>
                        
                        <div>
                            <button type="submit" class="w-full text-white bg-green-600 hover:bg-green-700 font-semibold rounded-lg text-sm px-5 py-3 text-center transition-colors">
                                ${isSignIn ? 'Sign In' : 'Sign Up'}
                            </button>
                        </div>
                    </form>

                    <p class="mt-6 text-center text-sm text-gray-600">
                        ${isSignIn ? "Don't have an account?" : "Already have an account?"}
                        <button id="toggleFormBtn" class="font-medium text-green-600 hover:text-green-500">
                            ${isSignIn ? 'Sign Up' : 'Sign In'}
                        </button>
                    </p>
                </div>
                `;
            };


            // =================================================================================
            // RENDER & UI UPDATE FUNCTIONS
            // =================================================================================

            function render() {
                // Render main components
                document.getElementById('navbar-container').innerHTML = Navbar();
                document.getElementById('footer-container').innerHTML = Footer();
                document.getElementById('page-content').innerHTML = pages[state.currentPage];
                document.getElementById('breadcrumb-container').innerHTML = Breadcrumb();

                // Update active nav links
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.toggle('nav-link-active', link.dataset.page === state.currentPage);
                });

                // Render auth modal if open
                const modal = document.getElementById('authModal');
                const modalContent = document.getElementById('modalContent');
                if (state.isModalOpen) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    if (!modal.classList.contains('modal-enter')) {
                        modalContent.innerHTML = AuthForm();
                        modal.classList.remove('modal-leave');
                        modal.classList.add('modal-enter');
                        addModalEventListeners();
                    }
                } else {
                    if (modal.classList.contains('modal-enter')) {
                        modal.classList.remove('modal-enter');
                        modal.classList.add('modal-leave');
                        setTimeout(() => {
                            modal.classList.add('hidden');
                            modal.classList.remove('flex');
                        }, 300); // match animation duration
                    }
                }

                // Add event listeners for newly rendered elements
                addEventListeners();
            }

            function updateState(newState) {
                Object.assign(state, newState);
                render();
            }

            // =================================================================================
            // EVENT LISTENERS
            // =================================================================================

            function addEventListeners() {
                // Navigation links
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = e.currentTarget.dataset.page;
                        if (page) {
                            updateState({ currentPage: page });
                            window.scrollTo(0, 0); // Scroll to top on page change
                        }
                    });
                });

                // Sign In / Logout buttons
                const signInBtn = document.getElementById('signInBtn');
                const logoutBtn = document.getElementById('logoutBtn');
                const mobileSignInBtn = document.getElementById('mobileSignInBtn');
                const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');

                if (signInBtn) signInBtn.addEventListener('click', openModal);
                if (mobileSignInBtn) mobileSignInBtn.addEventListener('click', openModal);
                if (logoutBtn) logoutBtn.addEventListener('click', handleLogout);
                if (mobileLogoutBtn) mobileLogoutBtn.addEventListener('click', handleLogout);

                // Mobile Menu Toggle
                const mobileMenuButton = document.getElementById('mobile-menu-button');
                const mobileMenu = document.getElementById('mobile-menu');
                if (mobileMenuButton) {
                    mobileMenuButton.addEventListener('click', () => {
                        mobileMenu.classList.toggle('hidden');
                    });
                }
            }

            function addModalEventListeners() {
                document.getElementById('authForm')?.addEventListener('submit', handleAuthFormSubmit);
                document.getElementById('closeModalBtn')?.addEventListener('click', closeModal);
                document.getElementById('toggleFormBtn')?.addEventListener('click', toggleAuthForm);
            }


            // =================================================================================
            // AUTHENTICATION LOGIC
            // =================================================================================

            function openModal() {
                updateState({ isModalOpen: true, isSignInForm: true });
            }

            function closeModal() {
                updateState({ isModalOpen: false });
            }

            function toggleAuthForm() {
                // Toggle the form state and re-render only the modal content
                state.isSignInForm = !state.isSignInForm;
                const modalContent = document.getElementById('modalContent');
                if (modalContent) {
                    modalContent.innerHTML = AuthForm();
                    addModalEventListeners(); // Re-attach listeners to the new form
                }
            }
            async function mockLogin(email, password) {
                // Simulate a network delay of 500ms
                await new Promise(resolve => setTimeout(resolve, 500));

                // --- Test Case 1: Successful Customer Login ---
                if (email === 'customer@test.com' && password === 'pass123') {
                    console.log('Mock Login: Success as customer');
                    return {
                        token: 'mock-customer-token-xyz-is-very-long-and-secure',
                        role: 'customer'
                    };
                }
                // --- Test Case 2: Successful Admin Login ---
                else if (email === 'admin@test.com' && password === 'pass456') {
                    console.log('Mock Login: Success as admin');
                    return {
                        token: 'mock-admin-token-abc-is-also-very-secure',
                        role: 'admin'
                    };
                }
                // --- Test Case 3: Failed Login ---
                else {
                    console.log('Mock Login: Failed');
                    throw new Error('Invalid email or password.');
                }
            }


            async function handleAuthFormSubmit(e) {
                e.preventDefault();
                const form = e.target;
                const email = form.email.value;
                const password = form.password.value;
                const messageEl = document.getElementById('authMessage');
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalBtnText = submitBtn.innerHTML;

                // --- Start Loading State ---
                messageEl.textContent = '';
                messageEl.classList.add('hidden');
                submitBtn.disabled = true;
                submitBtn.innerHTML = `<span class="flex items-center justify-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing...</span>`;


                try {
                    if (state.isSignInForm) {
                        // --- API SIGN IN ---

                        const response = await fetch('http://localhost:8084/api/customer/login', { 

                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ email, password })
                        });

                        const data = await response.json();

                        if (!response.ok) {
                            throw new Error(data.message || 'Login failed.');
                        }
                        console.log("Login successful:", data.session_token);

                        // Store token from backend response
                        if (response.data.session_token) {
                            localStorage.setItem('authToken', "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30");
                        } else {
                            throw new Error("No token received from server.");
                        }

                        // Check role and redirect
                        if (data.role === 'customer') {
                            window.location.href = './customer.html';
                        } else if (data.role === 'admin') {
                            window.location.href = './admin.html';
                        } else {
                            throw new Error('Unknown user role. Please contact support.');
                        }

                    } else {
                        // --- API SIGN UP ---
                        const name = form.name.value;

                        const response = await fetch('http://localhost:8084/api/customer/register', { 
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ name, email, password })
                        });

                        const data = await response.json();

                        if (!response.ok) {
                            throw new Error(data.message || 'Sign-up failed.');
                        }

                        // Automatically switch to sign-in form with a success message
                        toggleAuthForm(); // This flips the state to the sign-in form

                        // Use a short delay to ensure the DOM is updated before adding the success message
                        setTimeout(() => {
                            const newSignInForm = document.getElementById('authForm');
                            if (newSignInForm) {
                                newSignInForm.email.value = email; // Pre-fill email
                                const successMessage = document.createElement('p');
                                successMessage.className = 'text-sm text-green-600 -mt-2 mb-4';
                                successMessage.textContent = 'Account created successfully! Please sign in.';
                                newSignInForm.prepend(successMessage);
                            }
                        }, 100);
                    }
                } catch (error) {
                    messageEl.textContent = error.message;
                    messageEl.classList.remove('hidden');
                } finally {
                    // --- End Loading State ---
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalBtnText;
                }
            }

            function handleLogout() {
                localStorage.removeItem('authToken');
                updateState({ isLoggedIn: false, userEmail: null, currentPage: 'home' });
            }

            function checkAuthStatus() {
                const token = localStorage.getItem('authToken');
                if (token) {
                    try {
                        // Decode the token payload (this doesn't verify the signature)
                        const payload = JSON.parse(atob(token.split('.')[1]));

                        // Check if the token is expired
                        if (payload.exp * 1000 > Date.now()) {
                            updateState({ isLoggedIn: true, userEmail: payload.email });
                            return;
                        }
                    } catch (error) {
                        console.error("Error parsing token:", error);
                        // If token is malformed, treat as logged out
                    }
                }
                // No token, expired token, or invalid token
                localStorage.removeItem('authToken'); // Clean up bad/expired tokens
                updateState({ isLoggedIn: false, userEmail: null });
            }

            // =================================================================================
            // INITIALIZATION
            // =================================================================================

            function init() {
                checkAuthStatus(); // This will call updateState which calls render
            }

            init();

        });
    </script>

</body>

</html>